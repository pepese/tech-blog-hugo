---
title: OAuth入門
tags:
- OAuth
id: oauth-basics
draft: true
---

いまさらだが、 **OAuth 2.0** についてまとめる。

# 概要

- OAuth 2.0 は譲渡プロトコル
- リソース管理者が他者にリソースへのアクセスを許可する手段
- リソースへアクセスしたいクライアントはリソース管理者から **トークン** を受け取る
- このトークンには、リソース管理者が許可したことのみしか行えないようになっている
- **認可フレームワーク** 、 *認証のフレームワークではない*

以降の登場人物は以下。

- リソース所有者（ Resource Owner ）
    - API へのアクセス権を持ち、その API へのアクセス権を譲渡できる所有者
- 保護対象リソース（ Protected Resource ）
    - リソース所有者がアクセス権を持っているリソース
    - ほとんどの場合 Web API
- クライアント（ Client ）
    - リソース所有者の代わりに保護対象リソースにアクセスするソフトウェア
- 認可サーバ（ Authorization Server ）
    - 保護対象リソースに信頼されているサーバ
    - OAuth のアクセス・トークンをクライアントへ発行する

OAuth 2.0 で行われる処理の概要は以下の通り。

1. クライアントは、リソース所有者を認可サーバへ送り、このリソース所有者にアクセス許可してもらうようリクエスト
2. リソース所有者が認可サーバに対して自身の認証を行うと、認可サーバはリソース所有者にクライアントのアクセスを許可するかどうか選択させる
3. クライアントに権限が付与される
4. クライアントは認可サーバにアクセス・トークンを要求し、認可サーバはアクセス・トークンをクライアントへ送る
5. クライアントは保護対象リソースへアクセス・トークンを示すことでアクセスできる

**TOFU** ( Trust On First Use) について考える必要あり。